<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>For Princess Surat | Happy Birthday</title>

  <meta name="description" content="A cosmic birthday experience for Princess Surat." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Dancing+Script:wght@400;700&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --space-black: #050505;
      --nebula-blue: #0a1a2f;
      --starlight: #e2e2ff;
      --cosmic-purple: #7b2cbf;
      --gravity-cyan: #00f2ff;
      --gold-accent: #ffd700;
      --nebula-pink: #ff6b9d;
      --deep-violet: #4a0080;

      --panel: rgba(255,255,255,0.045);
      --panel-strong: rgba(255,255,255,0.07);
      --border: rgba(255,255,255,0.10);
      --border-cyan: rgba(0,242,255,0.18);
      --shadow: rgba(0,0,0,0.55);

      --readable: rgba(255,255,255,0.92);
      --muted: rgba(255,255,255,0.70);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    html, body { height: 100%; }

    body {
      background: var(--space-black);
      color: var(--starlight);
      font-family: 'Cinzel', 'Georgia', serif;
      overflow-x: hidden;
      min-height: 100vh;
    }

    /* Enable custom cursor only when it makes sense */
    @media (pointer: fine) {
      body.entered { cursor: none; }
    }

    a, button { color: inherit; }

    /* --- Custom Cursor --- */
    .cursor-dot,
    .cursor-outline {
      position: fixed;
      top: 0;
      left: 0;
      transform: translate(-50%, -50%);
      border-radius: 50%;
      z-index: 9999;
      pointer-events: none;
      display: none;
    }

    @media (pointer: fine) {
      body.entered .cursor-dot,
      body.entered .cursor-outline {
        display: block;
      }
    }

    .cursor-dot {
      width: 6px;
      height: 6px;
      background: radial-gradient(circle, #fff, var(--gravity-cyan));
      box-shadow: 0 0 10px var(--gravity-cyan), 0 0 20px var(--gravity-cyan);
    }

    .cursor-outline {
      width: 34px;
      height: 34px;
      border: 1px solid rgba(0, 242, 255, 0.5);
      box-shadow: 0 0 18px rgba(0, 242, 255, 0.22);
      transition: width 0.2s, height 0.2s, background-color 0.2s, border-color 0.2s;
      background: rgba(0, 242, 255, 0.02);
      backdrop-filter: blur(6px);
    }

    .cursor-outline.hovering {
      width: 54px;
      height: 54px;
      background: rgba(0, 242, 255, 0.08);
      border-color: rgba(0, 242, 255, 0.85);
    }

    /* --- Background Canvases --- */
    #universe, #nebula-layer, #particles-layer, #tunnel-layer {
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }
    #universe { z-index: -5; }
    #nebula-layer { z-index: -4; opacity: 0.7; }
    #particles-layer { z-index: -3; opacity: 1; }
    #tunnel-layer { z-index: -2; opacity: 0.9; mix-blend-mode: screen; }

    /* --- Grain + Vignette for depth --- */
    .vignette {
      position: fixed;
      inset: 0;
      z-index: -1;
      pointer-events: none;
      background:
        radial-gradient(ellipse at center, transparent 0%, rgba(0,0,0,0.35) 60%, rgba(0,0,0,0.75) 100%);
    }

    .grain {
      position: fixed;
      inset: 0;
      z-index: -1;
      pointer-events: none;
      opacity: 0.07;
      background:
        repeating-linear-gradient(0deg, rgba(255,255,255,0.15) 0px, rgba(255,255,255,0.0) 2px, rgba(255,255,255,0.0) 6px),
        repeating-linear-gradient(90deg, rgba(255,255,255,0.06) 0px, rgba(255,255,255,0.0) 3px, rgba(255,255,255,0.0) 7px);
      filter: blur(0.4px);
      animation: grainShift 7s ease-in-out infinite;
    }

    @keyframes grainShift {
      0%, 100% { transform: translate3d(0,0,0); opacity: 0.065; }
      50% { transform: translate3d(6px,-8px,0); opacity: 0.085; }
    }

    /* --- Scroll Progress --- */
    .scroll-progress {
      position: fixed;
      top: 0;
      left: 0;
      height: 2px;
      width: 100%;
      background: linear-gradient(90deg, var(--gravity-cyan), var(--cosmic-purple));
      z-index: 9999;
      transform-origin: left;
      transform: scaleX(0);
      box-shadow: 0 0 10px var(--gravity-cyan);
    }

    /* --- Typography & Motion --- */
    h1, h2, h3 {
      font-weight: 300;
      text-transform: uppercase;
      letter-spacing: 0.18em;
    }

    .fade-in-up {
      opacity: 0;
      transform: translateY(34px);
      transition: opacity 1.4s cubic-bezier(0.19, 1, 0.22, 1), transform 1.4s cubic-bezier(0.19, 1, 0.22, 1);
      will-change: opacity, transform;
    }

    .fade-in-up.visible {
      opacity: 1;
      transform: translateY(0);
    }

    /* --- Entry Overlay --- */
    #entry-screen {
      position: fixed;
      inset: 0;
      background: radial-gradient(ellipse at center, #0a0a18 0%, #000 70%, #000 100%);
      z-index: 1000;
      display: grid;
      place-items: center;
      transition: opacity 1.6s ease, visibility 1.6s, transform 1.6s ease;
      overflow: hidden;
    }

    #entry-screen.hidden {
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
      transform: scale(1.4);
    }

    .entry-core {
      position: relative;
      width: min(720px, 92vw);
      padding: 54px 26px;
      border-radius: 24px;
      background: linear-gradient(145deg, rgba(255,255,255,0.03), rgba(255,255,255,0.06));
      border: 1px solid rgba(255,255,255,0.08);
      box-shadow: 0 20px 60px rgba(0,0,0,0.65);
      text-align: center;
      backdrop-filter: blur(18px);
    }

    .entry-portal {
      position: absolute;
      inset: -40%;
      border-radius: 50%;
      background:
        radial-gradient(circle at 50% 50%,
          rgba(0, 242, 255, 0.18) 0%,
          rgba(123, 44, 191, 0.11) 30%,
          rgba(255, 107, 157, 0.08) 50%,
          transparent 70%);
      filter: blur(0.2px);
      animation: portalPulse 3.2s ease-in-out infinite;
      transform-origin: center;
      pointer-events: none;
    }

    @keyframes portalPulse {
      0%, 100% { transform: scale(1); opacity: 0.65; }
      50% { transform: scale(1.08); opacity: 0.95; }
    }

    .entry-rings {
      position: absolute;
      inset: -55%;
      border-radius: 50%;
      border: 1px solid rgba(0, 242, 255, 0.18);
      animation: ringRotate 24s linear infinite;
      pointer-events: none;
    }

    .entry-rings::before,
    .entry-rings::after {
      content: '';
      position: absolute;
      inset: 9%;
      border-radius: 50%;
      border: 1px solid rgba(123, 44, 191, 0.18);
    }
    .entry-rings::before { animation: ringRotate 18s linear infinite reverse; }
    .entry-rings::after {
      inset: 18%;
      border-color: rgba(255, 215, 0, 0.14);
      animation: ringRotate 12s linear infinite;
    }

    @keyframes ringRotate { 100% { transform: rotate(360deg); } }

    .glitch-text {
      font-size: clamp(1.9rem, 5.6vw, 3.6rem);
      margin-bottom: 14px;
      background: linear-gradient(135deg, #ffffff 0%, #bdbdff 40%, var(--gravity-cyan) 100%);
      -webkit-background-clip: text;
      color: transparent;
      text-shadow: 0 0 70px rgba(0, 242, 255, 0.24);
      line-height: 1.1;
    }

    .subtitle {
      color: var(--gravity-cyan);
      font-size: 0.82rem;
      letter-spacing: 0.45em;
      opacity: 0.9;
      text-shadow: 0 0 20px rgba(0, 242, 255, 0.45);
      margin-top: 8px;
    }

    .entry-hint {
      margin-top: 18px;
      color: rgba(255,255,255,0.7);
      font-family: 'Orbitron', system-ui, sans-serif;
      font-size: 0.78rem;
      letter-spacing: 0.18em;
      opacity: 0.9;
    }

    .entry-btn {
      margin-top: 28px;
      padding: 18px 52px;
      border-radius: 999px;
      background: transparent;
      border: 1px solid rgba(255,255,255,0.30);
      color: white;
      font-family: 'Orbitron', system-ui, sans-serif;
      letter-spacing: 0.28em;
      text-transform: uppercase;
      font-size: 0.82rem;
      transition: all 0.45s cubic-bezier(0.19, 1, 0.22, 1);
      position: relative;
      overflow: hidden;
      cursor: pointer;
    }

    .entry-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -110%;
      width: 120%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(0, 242, 255, 0.26), transparent);
      transition: 0.5s;
    }

    .entry-btn:hover {
      border-color: var(--gravity-cyan);
      text-shadow: 0 0 22px var(--gravity-cyan);
      box-shadow: 0 0 70px rgba(0, 242, 255, 0.22), inset 0 0 34px rgba(0, 242, 255, 0.10);
      transform: translateY(-1px) scale(1.03);
    }
    .entry-btn:hover::before { left: 110%; }

    /* --- Audio toast fallback --- */
    .audio-toast {
      position: fixed;
      left: 50%;
      bottom: 18px;
      transform: translateX(-50%);
      z-index: 1100;
      padding: 12px 14px;
      border-radius: 14px;
      background: rgba(10, 10, 20, 0.72);
      border: 1px solid rgba(255,255,255,0.12);
      backdrop-filter: blur(16px);
      box-shadow: 0 10px 30px rgba(0,0,0,0.55);
      display: none;
      gap: 10px;
      align-items: center;
      max-width: min(560px, 92vw);
      color: rgba(255,255,255,0.88);
      font-family: 'Orbitron', system-ui, sans-serif;
      letter-spacing: 0.06em;
      font-size: 0.78rem;
    }
    .audio-toast.show { display: flex; }

    .audio-toast button {
      padding: 10px 14px;
      border-radius: 999px;
      border: 1px solid rgba(0,242,255,0.35);
      background: rgba(0,242,255,0.06);
      color: white;
      cursor: pointer;
      transition: 0.25s ease;
    }
    .audio-toast button:hover {
      background: rgba(0,242,255,0.12);
      border-color: rgba(0,242,255,0.65);
      box-shadow: 0 0 22px rgba(0,242,255,0.18);
    }

    /* --- Main Content --- */
    main.content-wrapper {
      max-width: 900px;
      margin: 0 auto;
      padding: 110px 22px 80px;
      opacity: 0;
      transition: opacity 1.8s ease;
    }
    main.content-wrapper.visible { opacity: 1; }

    .title-section {
      text-align: center;
      margin-bottom: 70px;
      position: relative;
    }

    .main-title h1 {
      font-size: clamp(1.7rem, 4.8vw, 3rem);
      margin-bottom: 8px;
    }

    .highlight {
      background: linear-gradient(135deg, var(--gravity-cyan), var(--cosmic-purple), var(--nebula-pink));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 0 18px rgba(0, 242, 255, 0.15);
    }

    /* --- Music Player --- */
    .music-player {
      background: var(--panel);
      backdrop-filter: blur(18px);
      border: 1px solid rgba(255, 255, 255, 0.10);
      border-radius: 24px;
      padding: 22px;
      margin: 0 auto 60px;
      max-width: 460px;
      display: flex;
      flex-direction: column;
      align-items: center;
      box-shadow: 0 18px 44px rgba(0,0,0,0.55), inset 0 0 40px rgba(0, 242, 255, 0.03);
    }

    .track-info { text-align: center; margin-bottom: 14px; }

    .track-name {
      display: block;
      color: white;
      font-size: 1.05rem;
      margin-bottom: 6px;
      text-shadow: 0 0 10px rgba(255,255,255,0.25);
    }
    .track-artist {
      color: rgba(255,255,255,0.55);
      font-size: 0.78rem;
      font-style: italic;
    }

    #visualizer {
      width: 100%;
      height: 74px;
      display: flex;
      align-items: flex-end;
      justify-content: center;
      gap: 3px;
      padding-bottom: 4px;
    }

    .bar {
      width: 4px;
      background: linear-gradient(to top, var(--deep-violet), var(--cosmic-purple), var(--gravity-cyan));
      border-radius: 3px;
      height: 3px;
      transition: height 0.05s linear;
      filter: drop-shadow(0 0 10px rgba(0, 242, 255, 0.18));
      opacity: 0.75;
    }

    .music-actions {
      margin-top: 14px;
      display: flex;
      gap: 10px;
      align-items: center;
      flex-wrap: wrap;
      justify-content: center;
    }

    .pill {
      padding: 10px 14px;
      border-radius: 999px;
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.12);
      cursor: pointer;
      font-family: 'Orbitron', system-ui, sans-serif;
      font-size: 0.74rem;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      transition: 0.25s ease;
    }
    .pill:hover {
      border-color: rgba(0,242,255,0.35);
      box-shadow: 0 0 18px rgba(0,242,255,0.14);
      transform: translateY(-1px);
    }

    /* --- Cosmic Artifacts Grid --- */
    .memories-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 26px;
      margin: 60px 0 24px;
    }

    .hologram-card {
      height: 320px;
      background: linear-gradient(135deg, rgba(10, 10, 30, 0.58), rgba(20, 10, 44, 0.36));
      border: 1px solid var(--border-cyan);
      border-radius: 16px;
      position: relative;
      overflow: hidden;
      display: grid;
      place-items: center;
      padding: 20px;
      transform: perspective(900px) rotateX(var(--rx, 0deg)) rotateY(var(--ry, 0deg));
      transition: border-color 0.35s ease, box-shadow 0.35s ease, transform 0.15s ease;
      will-change: transform;
      isolation: isolate;
    }

    .hologram-card::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(180deg, transparent, rgba(0, 242, 255, 0.085), transparent);
      transform: translateY(-100%);
      animation: scanline 4s linear infinite;
      opacity: 0.85;
      pointer-events: none;
      mix-blend-mode: screen;
    }

    .hologram-card::after {
      content: '';
      position: absolute;
      inset: 0;
      background:
        radial-gradient(circle at 50% 30%, rgba(255,255,255,0.06), transparent 50%),
        radial-gradient(circle at 50% 60%, transparent 0%, rgba(0,0,0,0.45) 100%);
      pointer-events: none;
    }

    @keyframes scanline {
      0% { transform: translateY(-100%); }
      100% { transform: translateY(100%); }
    }

    .hologram-card:hover {
      border-color: rgba(0, 242, 255, 0.75);
      box-shadow: 0 22px 55px rgba(0, 242, 255, 0.18), inset 0 0 50px rgba(0, 242, 255, 0.05);
    }

    .artifact {
      width: min(220px, 70%);
      height: auto;
      filter: drop-shadow(0 0 20px rgba(0, 242, 255, 0.35)) drop-shadow(0 0 34px rgba(123, 44, 191, 0.20));
      z-index: 1;
    }

    .hologram-label {
      position: absolute;
      bottom: 18px;
      font-size: 0.76rem;
      color: var(--gravity-cyan);
      letter-spacing: 0.28em;
      text-transform: uppercase;
      text-shadow: 0 0 12px rgba(0, 242, 255, 0.55);
      z-index: 2;
      opacity: 0.95;
    }

    /* --- Letter / Poem --- */
    .letter-container {
      margin-top: 40px;
      background: linear-gradient(145deg, rgba(255,255,255,0.04), rgba(255,255,255,0.075));
      border: 1px solid rgba(255,255,255,0.10);
      border-left: 2px solid var(--cosmic-purple);
      padding: clamp(26px, 4.3vw, 54px);
      position: relative;
      border-radius: 0 16px 16px 0;
      box-shadow: 0 0 55px rgba(123, 44, 191, 0.12), inset 0 0 90px rgba(0, 0, 0, 0.32);
      overflow: hidden;
    }

    .letter-container::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 2px;
      background: linear-gradient(180deg, var(--gravity-cyan), var(--cosmic-purple), var(--nebula-pink));
      box-shadow: 0 0 18px rgba(123, 44, 191, 0.45);
    }

    .letter-container::after {
      /* constellation-like subtle texture */
      content: '';
      position: absolute;
      inset: 0;
      background:
        radial-gradient(circle at 12% 30%, rgba(255,255,255,0.14) 0 1px, transparent 2px),
        radial-gradient(circle at 80% 20%, rgba(0,242,255,0.20) 0 1px, transparent 2px),
        radial-gradient(circle at 65% 68%, rgba(255,107,157,0.18) 0 1px, transparent 2px),
        radial-gradient(circle at 28% 80%, rgba(255,215,0,0.16) 0 1px, transparent 2px),
        radial-gradient(circle at 50% 45%, rgba(255,255,255,0.10) 0 1px, transparent 2px);
      opacity: 0.35;
      pointer-events: none;
      mix-blend-mode: screen;
    }

    .letter-container p {
      position: relative;
      z-index: 1;
      margin-bottom: 18px;
      line-height: 1.9;
      font-size: clamp(1rem, 1.9vw, 1.12rem);
      color: var(--readable);
      text-shadow: 0 2px 4px rgba(0,0,0,0.5);
    }

    .letter-container p:last-child { margin-bottom: 0; }

    .signature {
      text-align: center;
      margin-top: 90px;
      padding-bottom: 40px;
      font-family: 'Dancing Script', cursive;
      font-size: clamp(1.9rem, 4.2vw, 2.5rem);
      background: linear-gradient(45deg, var(--gravity-cyan), var(--cosmic-purple), var(--nebula-pink));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      filter: drop-shadow(0 0 18px rgba(0, 242, 255, 0.22));
      opacity: 0.98;
    }

    /* --- Shooting Stars --- */
    .shooting-star {
      position: fixed;
      width: 120px;
      height: 2px;
      background: linear-gradient(90deg, rgba(255,255,255,0), rgba(255,255,255,1));
      border-radius: 50%;
      animation: shootingStar 3.6s linear infinite;
      opacity: 0;
      z-index: -1;
      pointer-events: none;
      filter: drop-shadow(0 0 10px rgba(0,242,255,0.18));
    }

    @keyframes shootingStar {
      0% { transform: translateX(-140px) translateY(0); opacity: 0; }
      6% { opacity: 1; }
      26% { opacity: 0; }
      100% { transform: translateX(110vw) translateY(360px); opacity: 0; }
    }

    /* --- Reduced Motion --- */
    @media (prefers-reduced-motion: reduce) {
      .entry-portal, .entry-rings, .shooting-star, .grain { animation: none !important; }
      .hologram-card::before { animation: none !important; }
      #tunnel-layer { display: none; }
    }

    /* --- Mobile --- */
    @media (max-width: 768px) {
      main.content-wrapper { padding-top: 96px; }
      .subtitle { letter-spacing: 0.28em; }
    }
  </style>
</head>

<body>
  <!-- Custom Cursor -->
  <div class="cursor-dot" data-cursor-dot></div>
  <div class="cursor-outline" data-cursor-outline></div>

  <!-- Scroll Progress -->
  <div class="scroll-progress" id="scroll-progress"></div>

  <!-- Background Layers -->
  <canvas id="universe"></canvas>
  <canvas id="nebula-layer"></canvas>
  <canvas id="particles-layer"></canvas>
  <canvas id="tunnel-layer"></canvas>
  <div class="vignette"></div>
  <div class="grain"></div>

  <!-- Shooting Stars -->
  <div class="shooting-star" style="top: 10%; left: 10%; animation-delay: 0s;"></div>
  <div class="shooting-star" style="top: 28%; left: 60%; animation-delay: 3.8s;"></div>
  <div class="shooting-star" style="top: 52%; left: 15%; animation-delay: 7.6s;"></div>

  <!-- Entry Overlay -->
  <section id="entry-screen" aria-label="Entry screen">
    <div class="entry-portal" aria-hidden="true"></div>
    <div class="entry-rings" aria-hidden="true"></div>

    <div class="entry-core">
      <h2 class="subtitle">A BIRTHDAY WRITTEN IN STARDUST</h2>
      <h1 class="glitch-text" id="entry-title" data-text="HAPPY BIRTHDAY, PRINCESS">HAPPY BIRTHDAY, PRINCESS</h1>
      <div class="entry-hint">Press Enter or click to dive in. Sound will try to start with your gesture.</div>
      <button class="entry-btn" id="start-btn" type="button">Dive into Her Cosmos</button>
    </div>
  </section>

  <!-- Audio Toast Fallback -->
  <div class="audio-toast" id="audio-toast" role="status" aria-live="polite">
    <div style="flex: 1;">
      Sound is paused by your browser. Tap “Enable Sound” to continue the dive.
    </div>
    <button id="enable-sound" type="button">Enable Sound</button>
  </div>

  <!-- Main Content -->
  <main class="content-wrapper" id="main-content">
    <header class="title-section fade-in-up">
      <h1>To <span class="highlight">Princess Surat</span></h1>
      <p class="subtitle">HAPPY BIRTHDAY • ANOTHER ORBIT, STILL UNREAL</p>
    </header>

    <!-- Audio Player -->
    <section class="music-player fade-in-up" aria-label="Music player">
      <div class="track-info">
        <span class="track-name">Pisces</span>
        <span class="track-artist">Tony Ann (Slowed &amp; Reverb)</span>
      </div>

      <div id="visualizer" aria-hidden="true"></div>

      <!-- Keep the path EXACTLY the same -->
      <audio id="bg-music" loop preload="auto" crossorigin="anonymous">
        <source src="Pisces - Tony Ann (Piano Cover).mp3" type="audio/mpeg">
      </audio>

      <div class="music-actions">
        <button class="pill" id="toggle-music" type="button">Pause</button>
        <button class="pill" id="boost-warp" type="button">Warp</button>
      </div>
    </section>

    <!-- Cosmic Artifacts (SVG-only) -->
    <section class="memories-grid fade-in-up" aria-label="Cosmic artifacts">
      <!-- Artifact 1: Crown Nebula -->
      <article class="hologram-card" tabindex="0" aria-label="Crown Nebula">
        <svg class="artifact" viewBox="0 0 220 220" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="A glowing cosmic crown">
          <defs>
            <linearGradient id="crownG" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#00f2ff" stop-opacity="0.95">
                <animate attributeName="stop-color" values="#00f2ff;#7b2cbf;#ff6b9d;#00f2ff" dur="6s" repeatCount="indefinite"/>
              </stop>
              <stop offset="100%" stop-color="#ffd700" stop-opacity="0.75">
                <animate attributeName="stop-opacity" values="0.55;0.85;0.55" dur="4s" repeatCount="indefinite"/>
              </stop>
            </linearGradient>
            <filter id="glowA" x="-50%" y="-50%" width="200%" height="200%">
              <feGaussianBlur stdDeviation="3.5" result="b"/>
              <feMerge>
                <feMergeNode in="b"/>
                <feMergeNode in="SourceGraphic"/>
              </feMerge>
            </filter>
          </defs>

          <!-- aura -->
          <circle cx="110" cy="110" r="92" fill="none" stroke="url(#crownG)" stroke-width="1" opacity="0.25">
            <animate attributeName="r" values="88;96;88" dur="5s" repeatCount="indefinite"/>
            <animate attributeName="opacity" values="0.16;0.35;0.16" dur="5s" repeatCount="indefinite"/>
          </circle>

          <!-- crown -->
          <g filter="url(#glowA)">
            <path d="M45 130 L65 85 L95 115 L110 75 L125 115 L155 85 L175 130
                     Q110 160 45 130 Z"
                  fill="url(#crownG)" opacity="0.92"/>
            <rect x="55" y="130" width="110" height="16" rx="8" fill="rgba(255,255,255,0.08)" stroke="rgba(0,242,255,0.35)"/>
            <circle cx="65" cy="85" r="4" fill="#fff" opacity="0.9"/>
            <circle cx="110" cy="75" r="5" fill="#ffd700" opacity="0.85"/>
            <circle cx="155" cy="85" r="4" fill="#fff" opacity="0.9"/>
          </g>

          <!-- stardust -->
          <g opacity="0.8">
            <circle cx="40" cy="70" r="1.2" fill="#fff">
              <animate attributeName="opacity" values="0.1;0.9;0.1" dur="2.8s" repeatCount="indefinite"/>
            </circle>
            <circle cx="182" cy="62" r="1.1" fill="#00f2ff">
              <animate attributeName="opacity" values="0.2;1;0.2" dur="3.1s" repeatCount="indefinite"/>
            </circle>
            <circle cx="170" cy="170" r="1.1" fill="#ff6b9d">
              <animate attributeName="opacity" values="0.2;0.95;0.2" dur="2.6s" repeatCount="indefinite"/>
            </circle>
            <circle cx="56" cy="168" r="1.0" fill="#fff">
              <animate attributeName="opacity" values="0.15;0.8;0.15" dur="3.4s" repeatCount="indefinite"/>
            </circle>
          </g>
        </svg>
        <span class="hologram-label">Crown Nebula</span>
      </article>

      <!-- Artifact 2: Astral Compass -->
      <article class="hologram-card" tabindex="0" aria-label="Astral Compass">
        <svg class="artifact" viewBox="0 0 220 220" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="A glowing astral compass">
          <defs>
            <radialGradient id="compassCore" cx="50%" cy="50%" r="60%">
              <stop offset="0%" stop-color="#ffffff" stop-opacity="0.9"/>
              <stop offset="45%" stop-color="#00f2ff" stop-opacity="0.28"/>
              <stop offset="100%" stop-color="transparent"/>
            </radialGradient>
            <linearGradient id="compassG" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#7b2cbf" stop-opacity="0.8"/>
              <stop offset="100%" stop-color="#00f2ff" stop-opacity="0.9"/>
            </linearGradient>
            <filter id="glowB" x="-60%" y="-60%" width="220%" height="220%">
              <feGaussianBlur stdDeviation="3" result="b"/>
              <feMerge>
                <feMergeNode in="b"/>
                <feMergeNode in="SourceGraphic"/>
              </feMerge>
            </filter>
          </defs>

          <g filter="url(#glowB)">
            <circle cx="110" cy="110" r="82" fill="rgba(255,255,255,0.03)" stroke="rgba(0,242,255,0.35)" stroke-width="1.2"/>
            <circle cx="110" cy="110" r="58" fill="none" stroke="rgba(123,44,191,0.35)" stroke-width="1"/>
            <circle cx="110" cy="110" r="88" fill="none" stroke="url(#compassG)" stroke-width="1" opacity="0.25"/>

            <!-- ticks -->
            <g stroke="rgba(255,255,255,0.35)" stroke-width="1">
              <line x1="110" y1="22" x2="110" y2="36"/>
              <line x1="110" y1="184" x2="110" y2="198"/>
              <line x1="22" y1="110" x2="36" y2="110"/>
              <line x1="184" y1="110" x2="198" y2="110"/>
              <g opacity="0.7">
                <line x1="55" y1="55" x2="65" y2="65"/>
                <line x1="165" y1="55" x2="155" y2="65"/>
                <line x1="55" y1="165" x2="65" y2="155"/>
                <line x1="165" y1="165" x2="155" y2="155"/>
              </g>
            </g>

            <!-- needle group rotates -->
            <g>
              <animateTransform attributeName="transform" type="rotate" from="0 110 110" to="360 110 110" dur="18s" repeatCount="indefinite"/>
              <path d="M110 40 L122 110 L110 180 L98 110 Z" fill="url(#compassG)" opacity="0.78"/>
              <circle cx="110" cy="110" r="8" fill="#fff" opacity="0.85"/>
              <circle cx="110" cy="110" r="18" fill="url(#compassCore)" opacity="0.9"/>
            </g>
          </g>
        </svg>
        <span class="hologram-label">Astral Compass</span>
      </article>

      <!-- Artifact 3: Celestial Bloom -->
      <article class="hologram-card" tabindex="0" aria-label="Celestial Bloom">
        <svg class="artifact" viewBox="0 0 220 220" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="A celestial bloom with orbiting particles">
          <defs>
            <linearGradient id="bloomG" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#00f2ff" stop-opacity="0.85"/>
              <stop offset="55%" stop-color="#7b2cbf" stop-opacity="0.75"/>
              <stop offset="100%" stop-color="#ff6b9d" stop-opacity="0.75"/>
            </linearGradient>
            <radialGradient id="bloomCore" cx="50%" cy="50%" r="60%">
              <stop offset="0%" stop-color="#fff" stop-opacity="1"/>
              <stop offset="55%" stop-color="#ffd700" stop-opacity="0.7"/>
              <stop offset="100%" stop-color="transparent" stop-opacity="0"/>
            </radialGradient>
            <filter id="glowC" x="-60%" y="-60%" width="220%" height="220%">
              <feGaussianBlur stdDeviation="3.2" result="b"/>
              <feMerge>
                <feMergeNode in="b"/>
                <feMergeNode in="SourceGraphic"/>
              </feMerge>
            </filter>
          </defs>

          <g filter="url(#glowC)">
            <circle cx="110" cy="110" r="82" fill="none" stroke="rgba(0,242,255,0.22)" opacity="0.7"/>
            <!-- petals -->
            <g fill="url(#bloomG)" opacity="0.9">
              <ellipse cx="110" cy="62" rx="16" ry="42">
                <animate attributeName="ry" values="40;46;40" dur="3.2s" repeatCount="indefinite"/>
              </ellipse>
              <ellipse cx="110" cy="62" rx="16" ry="42" transform="rotate(60 110 110)"/>
              <ellipse cx="110" cy="62" rx="16" ry="42" transform="rotate(120 110 110)"/>
              <ellipse cx="110" cy="62" rx="16" ry="42" transform="rotate(180 110 110)"/>
              <ellipse cx="110" cy="62" rx="16" ry="42" transform="rotate(240 110 110)"/>
              <ellipse cx="110" cy="62" rx="16" ry="42" transform="rotate(300 110 110)"/>
            </g>

            <circle cx="110" cy="110" r="16" fill="url(#bloomCore)">
              <animate attributeName="r" values="14;18;14" dur="2.2s" repeatCount="indefinite"/>
            </circle>
            <circle cx="110" cy="110" r="6" fill="#fff" opacity="0.9"/>

            <!-- orbiting particles -->
            <g>
              <animateTransform attributeName="transform" type="rotate" from="0 110 110" to="360 110 110" dur="9s" repeatCount="indefinite"/>
              <circle cx="110" cy="28" r="2" fill="#fff" opacity="0.85"/>
              <circle cx="190" cy="110" r="1.6" fill="#00f2ff" opacity="0.75"/>
              <circle cx="110" cy="192" r="2" fill="#ff6b9d" opacity="0.65"/>
              <circle cx="30" cy="110" r="1.3" fill="#ffd700" opacity="0.75"/>
            </g>
          </g>
        </svg>
        <span class="hologram-label">Celestial Bloom</span>
      </article>
    </section>

    <!-- The Birthday Letter / Poem -->
    <section class="letter-container fade-in-up" aria-label="Birthday letter">
      <p><strong>Princess Surat</strong>,</p>

      <p>
        Today isn’t just a date to me — it’s an event. A clean, bright mark in the calendar of the universe,
        the kind of day that makes the dark look intentional, like it was built just to frame you.
      </p>

      <p>
        Your beauty isn’t “pretty” in the casual way people throw that word around.
        It’s gravitational. It changes how everything else behaves.
        It makes attention bend. It makes silence feel like it’s holding its breath.
        Like starlight deciding to stay a second longer before it fades.
      </p>

      <p>
        I don’t need to borrow fake scenes to explain you.
        I can speak from what’s consistent: the way you exist with precision —
        picky, exact, and rightfully so — like a crown that refuses the wrong head.
        And still… even with all that sharpness, you glow soft.
        Not weak. Soft the way nebulae are soft: endless, patient, and impossible to ignore.
      </p>

      <p>
        So here’s my birthday wish, written in my language:
        May this year treat you like a constant, not a variable.
        May the world stop trying to reduce you into something simpler.
        May every room you walk into learn your name correctly —
        not because it’s demanded, but because your presence makes it necessary.
      </p>

      <p>
        Happy Birthday, <span class="highlight">Princess</span>.
        If the cosmos is a cathedral, you’re the moment the lights turn on.
      </p>

      <p style="margin-top: 22px;">
        Always, <br />
        Dandy
      </p>
    </section>

    <div class="signature fade-in-up">Dandy</div>
  </main>

  <script>
    /***********************
     * Utilities
     ***********************/
    function clamp(n, min, max) { return Math.max(min, Math.min(max, n)); }

    function hexToRgba(hex, a) {
      // Supports #rgb and #rrggbb
      const h = hex.replace('#', '').trim();
      let r, g, b;
      if (h.length === 3) {
        r = parseInt(h[0] + h[0], 16);
        g = parseInt(h[1] + h[1], 16);
        b = parseInt(h[2] + h[2], 16);
      } else {
        r = parseInt(h.slice(0, 2), 16);
        g = parseInt(h.slice(2, 4), 16);
        b = parseInt(h.slice(4, 6), 16);
      }
      return `rgba(${r}, ${g}, ${b}, ${a})`;
    }

    /***********************
     * Canvases (DPI-aware)
     ***********************/
    const universe = document.getElementById('universe');
    const uctx = universe.getContext('2d');

    const nebula = document.getElementById('nebula-layer');
    const nctx = nebula.getContext('2d');

    const particles = document.getElementById('particles-layer');
    const pctx = particles.getContext('2d');

    const tunnel = document.getElementById('tunnel-layer');
    const tctx = tunnel.getContext('2d');

    let W = 0, H = 0, DPR = 1;

    function resizeCanvases() {
      DPR = clamp(window.devicePixelRatio || 1, 1, 2);

      W = window.innerWidth;
      H = window.innerHeight;

      for (const c of [universe, nebula, particles, tunnel]) {
        c.width = Math.floor(W * DPR);
        c.height = Math.floor(H * DPR);
        c.style.width = W + 'px';
        c.style.height = H + 'px';
      }

      uctx.setTransform(DPR, 0, 0, DPR, 0, 0);
      nctx.setTransform(DPR, 0, 0, DPR, 0, 0);
      pctx.setTransform(DPR, 0, 0, DPR, 0, 0);
      tctx.setTransform(DPR, 0, 0, DPR, 0, 0);

      buildScene();
      drawNebula();
    }

    window.addEventListener('resize', resizeCanvases);

    /***********************
     * Starfield + Particles
     ***********************/
    let stars = [];
    let dust = [];
    let time = 0;

    let warpSpeed = 0;
    let targetSpeed = 1.6;

    const STAR_COLORS = ['#ffffff', '#00f2ff', '#7b2cbf', '#ff6b9d', '#ffd700'];
    const STAR_WEIGHTS = [0.58, 0.17, 0.11, 0.10, 0.04];

    function weightedStarColor() {
      const r = Math.random();
      let s = 0;
      for (let i = 0; i < STAR_WEIGHTS.length; i++) {
        s += STAR_WEIGHTS[i];
        if (r <= s) return STAR_COLORS[i];
      }
      return '#ffffff';
    }

    class Star {
      constructor(initial = false) { this.reset(initial); }
      reset(initial) {
        this.x = (Math.random() - 0.5) * W * 2;
        this.y = (Math.random() - 0.5) * H * 2;
        this.z = initial ? Math.random() * 2000 : 2000;
        this.size = Math.random() * 2.2 + 0.5;
        this.brightness = Math.random() * 0.75 + 0.25;
        this.color = weightedStarColor();
      }
      update(speed) {
        this.z -= speed;
        if (this.z <= 1) this.reset(false);
      }
      draw() {
        const x = (this.x / this.z) * 640 + W / 2;
        const y = (this.y / this.z) * 640 + H / 2;
        const s = (1200 / this.z) * this.size;
        const alpha = Math.min(1, (2000 - this.z) / 900) * this.brightness;

        if (x < -60 || x > W + 60 || y < -60 || y > H + 60) return;

        const glow = uctx.createRadialGradient(x, y, 0, x, y, s * 3.3);
        glow.addColorStop(0, hexToRgba(this.color, 0.9));
        glow.addColorStop(0.45, hexToRgba(this.color, 0.22));
        glow.addColorStop(1, 'rgba(0,0,0,0)');

        uctx.globalAlpha = alpha;
        uctx.fillStyle = glow;
        uctx.beginPath();
        uctx.arc(x, y, s * 3.3, 0, Math.PI * 2);
        uctx.fill();

        uctx.fillStyle = this.color;
        uctx.beginPath();
        uctx.arc(x, y, Math.max(0.7, s), 0, Math.PI * 2);
        uctx.fill();

        // streaks during warp
        if (warpSpeed > 10) {
          const streak = Math.min(warpSpeed * 2.4, 120);
          const dx = (x - W / 2) / 55;
          const dy = (y - H / 2) / 55;
          uctx.globalAlpha = alpha * 0.45;
          uctx.strokeStyle = hexToRgba(this.color, 0.55);
          uctx.lineWidth = Math.max(0.7, s * 0.6);
          uctx.beginPath();
          uctx.moveTo(x, y);
          uctx.lineTo(x - dx * streak, y - dy * streak);
          uctx.stroke();
        }
      }
    }

    class Dust {
      constructor() { this.reset(); }
      reset() {
        this.x = Math.random() * W;
        this.y = Math.random() * H;
        this.r = Math.random() * 2.8 + 0.8;
        this.vx = (Math.random() - 0.5) * 0.25;
        this.vy = (Math.random() - 0.5) * 0.25;
        this.o = Math.random() * 0.45 + 0.15;
        this.w = Math.random() * 0.02 + 0.01;
        this.ph = Math.random() * Math.PI * 2;
        const c = ['rgba(0, 242, 255,', 'rgba(123, 44, 191,', 'rgba(255, 107, 157,'][Math.floor(Math.random() * 3)];
        this.c = c;
      }
      update() {
        this.x += this.vx;
        this.y += this.vy;
        if (this.x < 0) this.x = W;
        if (this.x > W) this.x = 0;
        if (this.y < 0) this.y = H;
        if (this.y > H) this.y = 0;
      }
      draw(t) {
        const pulse = Math.sin(t * this.w + this.ph) * 0.3 + 0.7;
        pctx.globalAlpha = this.o * pulse;
        pctx.fillStyle = this.c + this.o + ')';
        pctx.beginPath();
        pctx.arc(this.x, this.y, this.r * pulse, 0, Math.PI * 2);
        pctx.fill();
      }
    }

    function buildScene() {
      const starCount = clamp(Math.floor((W * H) / 1800), 520, 980);
      stars = Array.from({ length: starCount }, () => new Star(true));
      dust = Array.from({ length: 60 }, () => new Dust());

      // prime background
      uctx.fillStyle = 'rgba(5,5,5,1)';
      uctx.fillRect(0, 0, W, H);
    }

    function drawNebula() {
      nctx.clearRect(0, 0, W, H);

      const g1 = nctx.createRadialGradient(W * 0.2, H * 0.78, 0, W * 0.2, H * 0.78, W * 0.55);
      g1.addColorStop(0, 'rgba(123, 44, 191, 0.18)');
      g1.addColorStop(0.5, 'rgba(123, 44, 191, 0.06)');
      g1.addColorStop(1, 'rgba(0,0,0,0)');
      nctx.fillStyle = g1;
      nctx.fillRect(0, 0, W, H);

      const g2 = nctx.createRadialGradient(W * 0.82, H * 0.22, 0, W * 0.82, H * 0.22, W * 0.48);
      g2.addColorStop(0, 'rgba(0, 242, 255, 0.12)');
      g2.addColorStop(0.5, 'rgba(0, 150, 255, 0.04)');
      g2.addColorStop(1, 'rgba(0,0,0,0)');
      nctx.fillStyle = g2;
      nctx.fillRect(0, 0, W, H);

      const g3 = nctx.createRadialGradient(W * 0.52, H * 0.52, 0, W * 0.52, H * 0.52, W * 0.70);
      g3.addColorStop(0, 'rgba(255, 107, 157, 0.10)');
      g3.addColorStop(1, 'rgba(0,0,0,0)');
      nctx.fillStyle = g3;
      nctx.fillRect(0, 0, W, H);
    }

    function drawTunnel() {
      tctx.clearRect(0, 0, W, H);
      if (warpSpeed < 6) return;

      const cx = W / 2, cy = H / 2;
      const intensity = clamp((warpSpeed - 6) / 70, 0, 1);

      // center bloom
      const core = tctx.createRadialGradient(cx, cy, 0, cx, cy, Math.min(W, H) * 0.45);
      core.addColorStop(0, `rgba(0, 242, 255, ${0.12 * intensity})`);
      core.addColorStop(0.35, `rgba(123, 44, 191, ${0.08 * intensity})`);
      core.addColorStop(0.7, `rgba(255, 107, 157, ${0.06 * intensity})`);
      core.addColorStop(1, 'rgba(0,0,0,0)');
      tctx.fillStyle = core;
      tctx.fillRect(0, 0, W, H);

      // rings
      const rings = 16;
      for (let i = 0; i < rings; i++) {
        const r = (i / rings) * Math.min(W, H) * 0.52 + (Math.sin((time + i * 17) * 0.03) * 6);
        tctx.globalAlpha = (0.028 + i * 0.002) * intensity;
        tctx.strokeStyle = i % 3 === 0 ? 'rgba(0,242,255,0.55)' : (i % 3 === 1 ? 'rgba(123,44,191,0.55)' : 'rgba(255,107,157,0.55)');
        tctx.lineWidth = 1;
        tctx.beginPath();
        tctx.arc(cx, cy, r, 0, Math.PI * 2);
        tctx.stroke();
      }

      // radial streaks
      const streaks = 48;
      tctx.globalAlpha = 0.06 * intensity;
      for (let i = 0; i < streaks; i++) {
        const a = (i / streaks) * Math.PI * 2 + time * 0.002;
        const len = Math.min(W, H) * (0.18 + intensity * 0.22);
        const x1 = cx + Math.cos(a) * (len * 0.35);
        const y1 = cy + Math.sin(a) * (len * 0.35);
        const x2 = cx + Math.cos(a) * (len * 1.0);
        const y2 = cy + Math.sin(a) * (len * 1.0);
        tctx.strokeStyle = i % 2 ? 'rgba(0,242,255,0.7)' : 'rgba(255,255,255,0.45)';
        tctx.beginPath();
        tctx.moveTo(x1, y1);
        tctx.lineTo(x2, y2);
        tctx.stroke();
      }
      tctx.globalAlpha = 1;
    }

    function animate() {
      time++;

      // trail clear (stronger during warp)
      const trail = warpSpeed > 10 ? 0.10 : 0.16;
      uctx.fillStyle = `rgba(5, 5, 5, ${trail})`;
      uctx.fillRect(0, 0, W, H);

      // ease warp speed
      warpSpeed += (targetSpeed - warpSpeed) * 0.024;

      for (const s of stars) {
        s.update(warpSpeed);
        s.draw();
      }

      pctx.clearRect(0, 0, W, H);
      for (const d of dust) {
        d.update();
        d.draw(time);
      }

      drawTunnel();
      requestAnimationFrame(animate);
    }

    resizeCanvases();
    animate();

    /***********************
     * Entry + Immersion
     ***********************/
    const startBtn = document.getElementById('start-btn');
    const entryScreen = document.getElementById('entry-screen');
    const mainContent = document.getElementById('main-content');
    const audio = document.getElementById('bg-music');

    const audioToast = document.getElementById('audio-toast');
    const enableSoundBtn = document.getElementById('enable-sound');

    let entered = false;

    function doDive() {
      if (entered) return;
      entered = true;

      document.body.classList.add('entered');

      // Warp burst
      warpSpeed = 85;
      targetSpeed = 85;
      setTimeout(() => { targetSpeed = 22; }, 1300);
      setTimeout(() => { targetSpeed = 1.6; }, 3000);

      entryScreen.classList.add('hidden');
      setTimeout(() => { mainContent.classList.add('visible'); }, 650);

      // Try to start audio (may be blocked)
      startAudio();
    }

    startBtn.addEventListener('click', doDive);
    window.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') doDive();
    });

    /***********************
     * Visualizer + WebAudio (one-time init)
     ***********************/
    const visualizerContainer = document.getElementById('visualizer');
    const toggleMusicBtn = document.getElementById('toggle-music');
    const boostWarpBtn = document.getElementById('boost-warp');

    const barCount = 38;
    const bars = [];
    for (let i = 0; i < barCount; i++) {
      const bar = document.createElement('div');
      bar.className = 'bar';
      visualizerContainer.appendChild(bar);
      bars.push(bar);
    }

    let audioCtx = null;
    let analyser = null;
    let dataArray = null;
    let rafViz = 0;

    function initAudioGraphOnce() {
      if (audioCtx && analyser && dataArray) return;

      audioCtx = new (window.AudioContext || window.webkitAudioContext)();

      // createMediaElementSource should be created once per <audio> element
      const src = audioCtx.createMediaElementSource(audio);
      analyser = audioCtx.createAnalyser();
      analyser.fftSize = 128;

      src.connect(analyser);
      analyser.connect(audioCtx.destination);

      dataArray = new Uint8Array(analyser.frequencyBinCount);
    }

    function renderViz() {
      if (!analyser || !dataArray) return;

      analyser.getByteFrequencyData(dataArray);
      const n = dataArray.length;

      for (let i = 0; i < bars.length; i++) {
        const v = dataArray[i % n] / 255;
        const h = 6 + v * 62;
        bars[i].style.height = h + 'px';
        bars[i].style.opacity = (0.55 + v * 0.5).toFixed(2);
      }

      rafViz = requestAnimationFrame(renderViz);
    }

    async function startAudio() {
      try {
        initAudioGraphOnce();
        if (audioCtx.state === 'suspended') await audioCtx.resume();

        await audio.play();
        audioToast.classList.remove('show');

        if (!rafViz) renderViz();
        toggleMusicBtn.textContent = 'Pause';
      } catch (err) {
        // Autoplay blocked until additional user gesture
        audioToast.classList.add('show');
        toggleMusicBtn.textContent = 'Play';
      }
    }

    enableSoundBtn.addEventListener('click', startAudio);

    toggleMusicBtn.addEventListener('click', async () => {
      if (audio.paused) {
        await startAudio();
      } else {
        audio.pause();
        toggleMusicBtn.textContent = 'Play';
      }
    });

    boostWarpBtn.addEventListener('click', () => {
      // a short controlled warp burst
      const prev = targetSpeed;
      targetSpeed = 60;
      setTimeout(() => { targetSpeed = 18; }, 900);
      setTimeout(() => { targetSpeed = prev; }, 1900);
    });

    /***********************
     * Scroll progress + subtle nebula parallax
     ***********************/
    const scrollProgress = document.getElementById('scroll-progress');
    let lastScrollY = window.scrollY;

    window.addEventListener('scroll', () => {
      const scrollTop = window.scrollY;
      const docHeight = document.documentElement.scrollHeight - window.innerHeight;
      const scrollPercent = docHeight > 0 ? (scrollTop / docHeight) : 0;
      scrollProgress.style.transform = `scaleX(${clamp(scrollPercent, 0, 1)})`;

      // Parallax
      nebula.style.transform = `translateY(${scrollTop * 0.10}px)`;
      particles.style.transform = `translateY(${scrollTop * 0.04}px)`;

      // tiny speed response to scroll velocity (feels like "moving through" the page)
      const delta = scrollTop - lastScrollY;
      lastScrollY = scrollTop;
      targetSpeed = clamp(1.6 + Math.abs(delta) * 0.02, 1.6, 8);
      clearTimeout(window.__speedReset);
      window.__speedReset = setTimeout(() => { targetSpeed = 1.6; }, 120);
    }, { passive: true });

    /***********************
     * Custom Cursor (smooth lerp, no per-event animation calls)
     ***********************/
    const cursorDot = document.querySelector('[data-cursor-dot]');
    const cursorOutline = document.querySelector('[data-cursor-outline]');
    const interactive = document.querySelectorAll('button, a, .hologram-card');

    let mouseX = W / 2, mouseY = H / 2;
    let outlineX = mouseX, outlineY = mouseY;

    window.addEventListener('mousemove', (e) => {
      mouseX = e.clientX;
      mouseY = e.clientY;
      if (cursorDot) {
        cursorDot.style.left = mouseX + 'px';
        cursorDot.style.top = mouseY + 'px';
      }
    }, { passive: true });

    function animateCursor() {
      // lerp
      outlineX += (mouseX - outlineX) * 0.14;
      outlineY += (mouseY - outlineY) * 0.14;

      if (cursorOutline) {
        cursorOutline.style.left = outlineX + 'px';
        cursorOutline.style.top = outlineY + 'px';
      }
      requestAnimationFrame(animateCursor);
    }
    animateCursor();

    interactive.forEach(el => {
      el.addEventListener('mouseenter', () => cursorOutline && cursorOutline.classList.add('hovering'));
      el.addEventListener('mouseleave', () => cursorOutline && cursorOutline.classList.remove('hovering'));
    });

    /***********************
     * Hologram tilt (complete feature)
     ***********************/
    const cards = document.querySelectorAll('.hologram-card');
    cards.forEach(card => {
      const maxTilt = 10; // degrees

      function setTilt(e) {
        const rect = card.getBoundingClientRect();
        const px = (e.clientX - rect.left) / rect.width;   // 0..1
        const py = (e.clientY - rect.top) / rect.height;   // 0..1
        const ry = (px - 0.5) * (maxTilt * 2);
        const rx = -(py - 0.5) * (maxTilt * 2);
        card.style.setProperty('--rx', rx.toFixed(2) + 'deg');
        card.style.setProperty('--ry', ry.toFixed(2) + 'deg');
      }

      card.addEventListener('pointermove', setTilt);
      card.addEventListener('pointerleave', () => {
        card.style.setProperty('--rx', '0deg');
        card.style.setProperty('--ry', '0deg');
      });

      // keyboard focus should also look good
      card.addEventListener('focus', () => {
        card.style.setProperty('--rx', '0deg');
        card.style.setProperty('--ry', '0deg');
      });
    });

    /***********************
     * Text Scramble (entry title)
     ***********************/
    class TextScramble {
      constructor(el) {
        this.el = el;
        this.chars = '!<>-_\\/[]{}—=+*^?#✦✧★☆';
        this.update = this.update.bind(this);
        this.frame = 0;
        this.queue = [];
        this.frameRequest = 0;
        this.resolve = () => {};
      }

      setText(newText) {
        const oldText = this.el.innerText;
        const length = Math.max(oldText.length, newText.length);
        const promise = new Promise((resolve) => this.resolve = resolve);
        this.queue = [];

        for (let i = 0; i < length; i++) {
          const from = oldText[i] || '';
          const to = newText[i] || '';
          const start = Math.floor(Math.random() * 32);
          const end = start + Math.floor(Math.random() * 34);
          this.queue.push({ from, to, start, end, char: '' });
        }

        cancelAnimationFrame(this.frameRequest);
        this.frame = 0;
        this.update();
        return promise;
      }

      update() {
        let output = '';
        let complete = 0;

        for (let i = 0; i < this.queue.length; i++) {
          let { from, to, start, end, char } = this.queue[i];
          if (this.frame >= end) {
            complete++;
            output += to;
          } else if (this.frame >= start) {
            if (!char || Math.random() < 0.28) {
              char = this.randomChar();
              this.queue[i].char = char;
            }
            output += `<span style="color: var(--gravity-cyan); text-shadow: 0 0 10px rgba(0,242,255,0.35);">${char}</span>`;
          } else {
            output += from;
          }
        }

        this.el.innerHTML = output;

        if (complete === this.queue.length) {
          this.resolve();
          this.frameRequest = 0;
        } else {
          this.frame++;
          this.frameRequest = requestAnimationFrame(this.update);
        }
      }

      randomChar() {
        return this.chars[Math.floor(Math.random() * this.chars.length)];
      }
    }

    const entryTitle = document.getElementById('entry-title');
    const scrambler = new TextScramble(entryTitle);
    setTimeout(() => {
      scrambler.setText('HAPPY BIRTHDAY, PRINCESS');
    }, 600);

    /***********************
     * Intersection observer (fade-in)
     ***********************/
    const io = new IntersectionObserver((entries) => {
      for (const entry of entries) {
        if (entry.isIntersecting) entry.target.classList.add('visible');
      }
    }, { threshold: 0.12, rootMargin: '0px 0px -60px 0px' });

    document.querySelectorAll('.fade-in-up').forEach(el => io.observe(el));
  </script>
</body>
</html>
